Tên Use Case: Tích hợp Dịch vụ AI Try-On

Actors: Hệ thống; Dịch vụ AI Try-On

Mô tả: Hệ thống gửi dữ liệu đầu vào (ảnh/body scan, tham số) đến dịch vụ AI để nhận kết quả render thử đồ.

Tiền điều kiện: Dịch vụ AI khả dụng; định dạng dữ liệu đúng; hạn mức gọi API.

Luồng sự kiện chính:
1. Hệ thống xác thực và chuẩn hóa dữ liệu đầu vào.
2. Gửi yêu cầu tới API AI Try-On.
3. Nhận kết quả render và lưu/hiển thị.

Luồng sự kiện phụ:
A. Retry khi timeout theo backoff.
B. Ghi nhận log và chỉ số hiệu năng.

Ngoại lệ/Lỗi:
- API lỗi/timeout; dữ liệu bị từ chối.
- Vượt hạn mức gọi; khóa tạm thời.

----------------------------------------

Tên Use Case: Tích hợp Nhà cung cấp đăng nhập (OAuth)

Actors: Hệ thống; Nhà cung cấp đăng nhập

Mô tả: Thực hiện đăng nhập/đăng ký thông qua OAuth; trao đổi mã ủy quyền lấy token và thông tin người dùng.

Tiền điều kiện: Ứng dụng đã đăng ký client tại nhà cung cấp; redirect URI hợp lệ.

Luồng sự kiện chính:
1. Chuyển hướng người dùng tới trang xác thực của nhà cung cấp.
2. Nhận mã ủy quyền và trao đổi lấy token.
3. Lấy thông tin người dùng, ánh xạ tài khoản nội bộ và tạo phiên.

Luồng sự kiện phụ:
A. Liên kết tài khoản nội bộ với nhà cung cấp.
B. Làm mới token khi hết hạn.

Ngoại lệ/Lỗi:
- Từ chối quyền/timeout; mã không hợp lệ.
- Sai redirect URI; lỗi cấu hình.

----------------------------------------

Tên Use Case: Tích hợp Cổng thanh toán

Actors: Hệ thống; Cổng thanh toán

Mô tả: Khởi tạo giao dịch, xử lý xác thực (3DS/OTP) và nhận callback kết quả để tạo/ cập nhật đơn.

Tiền điều kiện: Khóa API; cấu hình merchant; phương thức thanh toán hợp lệ.

Luồng sự kiện chính:
1. Hệ thống tạo yêu cầu thanh toán với thông tin đơn hàng.
2. Người dùng xác thực theo yêu cầu của cổng.
3. Nhận callback/webhook thành công/thất bại.
4. Cập nhật đơn hàng và thông báo.

Luồng sự kiện phụ:
A. Hoàn tiền/partial refund.
B. Lưu phương thức thanh toán tokenized.

Ngoại lệ/Lỗi:
- Giao dịch bị từ chối; 3DS/OTP thất bại.
- Webhook không xác thực; lỗi chữ ký.

----------------------------------------

Tên Use Case: Tích hợp Kho/Inventory

Actors: Hệ thống; Dịch vụ Kho/Inventory

Mô tả: Đồng bộ tồn kho, đặt giữ hàng trong giỏ/đơn và cập nhật khi fulfillment.

Tiền điều kiện: Kết nối tới dịch vụ kho; thiết lập SKU/biến thể.

Luồng sự kiện chính:
1. Đồng bộ số lượng tồn theo lịch/ sự kiện.
2. Đặt giữ hàng khi thêm giỏ hoặc tạo đơn.
3. Cập nhật trừ tồn khi đơn xác nhận.

Luồng sự kiện phụ:
A. Giải phóng đặt giữ khi hủy đơn/hết hạn giỏ.
B. Điều chỉnh tồn khi có kiểm kê.

Ngoại lệ/Lỗi:
- Sai lệch tồn; xung đột cập nhật.
- Timeout/lỗi API kho.

----------------------------------------

Tên Use Case: Tích hợp Lưu trữ hình ảnh/CDN

Actors: Hệ thống; CDN/Lưu trữ

Mô tả: Tải lên, biến đổi (resize/webp), phân phối hình ảnh sản phẩm và người dùng.

Tiền điều kiện: Khóa truy cập; quy tắc bucket; hạn mức.

Luồng sự kiện chính:
1. Xác thực file và siêu dữ liệu.
2. Tải lên và nhận URL/các biến thể.
3. Lưu metadata và dùng trong hiển thị.

Luồng sự kiện phụ:
A. Xóa/ghi đè file; dọn dẹp phiên bản.
B. CDN purge cache khi cần.

Ngoại lệ/Lỗi:
- File vượt dung lượng/định dạng sai.
- Lỗi truy cập/purge.

----------------------------------------

Tên Use Case: Tích hợp Phân tích/Tracking

Actors: Hệ thống; Nền tảng Analytics

Mô tả: Gửi sự kiện hành vi, chuyển đổi và hiệu suất để phân tích.

Tiền điều kiện: Chính sách quyền riêng tư/đồng ý người dùng; cấu hình tracker.

Luồng sự kiện chính:
1. Khởi tạo tracker theo phiên/người dùng.
2. Gửi sự kiện (view, click, add_to_cart, purchase...).
3. Tổng hợp và hiển thị dashboard.

Luồng sự kiện phụ:
A. Vô hiệu hóa tracking khi người dùng từ chối.
B. Mã hóa/ẩn danh dữ liệu nhạy cảm.

Ngoại lệ/Lỗi:
- Mất gói sự kiện; sai định dạng.
- Lỗi đồng bộ/giới hạn tốc độ.

