@startuml
skinparam linetype ortho
start
:Parse JSON: email, password, name;
:Validate định dạng email, độ mạnh mật khẩu;
if (Hợp lệ?) then (Có)
  :Kiểm tra DB kết nối;
  if (DB khả dụng?) then (Có)
    :Tra cứu người dùng theo email;
    if (Đã tồn tại?) then (Có)
      :409: Email đã tồn tại;
      end
    else (Không)
      :Hash mật khẩu (bcrypt/argon2);
      :Tạo user mới;
      if (Tạo thành công?) then (Có)
        :201: Trả user cơ bản;
        end
      else (Không)
        :500: USER_CREATE_FAILED;
        end
      endif
    endif
  else (Không)
    :503: DB không khả dụng;
    end
  endif
else (Không)
  :400: Email/Mật khẩu không hợp lệ;
  end
endif
@enduml

