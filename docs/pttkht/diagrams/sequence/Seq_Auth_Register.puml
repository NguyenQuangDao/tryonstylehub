@startuml
title Auth Register
actor User
boundary WebApp
control Backend
database DB

User -> WebApp: Nhập thông tin đăng ký
WebApp -> Backend: POST /api/auth/register
Backend -> Backend: Validate dữ liệu
alt Hợp lệ
  Backend -> DB: Kiểm tra email tồn tại
  alt Chưa tồn tại
    Backend -> Backend: Hash mật khẩu
    Backend -> DB: Tạo user mới
    DB --> Backend: User đã tạo
    Backend --> WebApp: 201 {userId}
    WebApp --> User: Đăng ký thành công
  else Email đã tồn tại
    Backend --> WebApp: 409 Conflict
    WebApp --> User: Email đã được dùng
  end
else Không hợp lệ
  Backend --> WebApp: 400 Bad Request
  WebApp --> User: Sửa dữ liệu
end
@enduml

